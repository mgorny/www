<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
	<head>
		<meta charset='UTF-8'/>
		<title>~mgorny/projects</title>
		<link rel='stylesheet' type='text/css' href='index.css' />
		<script src="index.js"></script>
		<script src="projects.js"></script>
	</head>
	<body>
		<h1>~mgorny/projects</h1>

		<p>
			<a href='index.html'>« ~mgorny</a>
		</p>

		<p>
			Most of my work is focused around small do-one-thing-well
			projects.  This page aims to list at least the most useful
			of them.  The projects are ordered by initial commit date.
			This is still a work-in-progress, missing many older
			projects.
		</p>

		
		<div>
			<h2>
				goose (gander) <sup>[2020-05]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					django gentoo metric python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/gander">mgorny/gander</a>
				
				<a rel="external"
					href="https://github.com/mgorny/goose">mgorny/goose</a>
				
			</p>
			

			

			<p>A privacy-first anonymous metric collection system for Gentoo.
Focused on reporting installed packages and other data related
to package management.  Consists of <a class="reference external" href="https://www.djangoproject.com/">Django</a>-based server (goose)
and Python submission client (gander).</p>

		</div>
		
		<div>
			<h2>
				GSoC 2020: FUSE-based sandbox and new binpkg format <sup>[2020-05]</sup>
				<em>(mentor)</em>
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo mentor package-management
				</em>
			</p>

			

			

			

			<p>Mentoring two students with <a class="reference external" href="https://wiki.gentoo.org/wiki/Project:Portage">Portage</a>-related projects.  One of them
is writing a <a class="reference external" href="https://github.com/libfuse/libfuse/">FUSE</a>-based Gentoo <a class="reference external" href="https://wiki.gentoo.org/wiki/Project:Sandbox">sandbox</a> replacement, a tool
to restrict build process' access to the filesystem, for <a class="reference external" href="https://summerofcode.withgoogle.com/">GSoC</a> 2020.
The other one is implementing a new binary package format as described
in <a class="reference external" href="https://www.gentoo.org/glep/glep-0078.html">GLEP 78</a>, as a university project.</p>

		</div>
		
		<div>
			<h2>
				nattka <sup>[2020-03]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo git keywording pkgcore python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/nattka">mgorny/nattka</a>
				
			</p>
			

			

			<p>Multi-purpose arch team helper.  Provides a sanity-check process that is running on Gentoo Infra in order to verify dependencies on keywording and stabilization requests, as well as client-side tooling to apply keywords, commit them and resolve the bugs.</p>

		</div>
		
		<div>
			<h2>
				python-guide <sup>[2020-02]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					doc gentoo python sphinx
				</em>
			</p>

			
			<p>www:
				
				<a rel="external"
					href="https://dev.gentoo.org/~mgorny/python-guide/">https://dev.gentoo.org/~mgorny/python-guide/</a>
				
			</p>
			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/python-guide">mgorny/python-guide</a>
				
			</p>
			

			

			<p>Topic-oriented documentation for writing ebuilds for packages written
in Python.  Built on top of real-life examples.  Written using
<a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a>.</p>

		</div>
		
		<div>
			<h2>
				policy-guide <sup>[2020-01]</sup>
				<em>(initial author)</em>
			</h2>
			
			<p>tags:
				<em class="tags">
					doc gentoo qa sphinx
				</em>
			</p>

			
			<p>www:
				
				<a rel="external"
					href="https://projects.gentoo.org/qa/policy-guide/">https://projects.gentoo.org/qa/policy-guide/</a>
				
			</p>
			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/proj/policy-guide.git">proj/policy-guide.git</a>
				
			</p>
			

			<p>Precise listing of binding QA policies in Gentoo, along with rationale
whenever available.  Replaces and clarifies data previously found
across <a class="reference external" href="https://wiki.gentoo.org/wiki/Project:Gentoo">project wiki pages</a> and <a class="reference external" href="https://devmanual.gentoo.org/">devmanual</a>.  Additionally, it serves
as a proof-of-concept for porting Gentoo documentation to <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a>.</p>

		</div>
		
		<div>
			<h2>
				Gentoo Distribution Kernel <sup>[2020-01]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo package-management
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/repo/gentoo.git">repo/gentoo.git</a>
				
			</p>
			

			<p>Created the framework for building kernels via packages, and added
initial Distribution Kernel packages.  This provides an alternative
to the historical way of packaging kernel sources and building them
manually, and aligns Gentoo with other distributions (including its
derivatives).  DK provides the ability to build from source or use
a prebuilt binary package, to use generic or user-supplied
configuration.  It features initramfs support (via <a class="reference external" href="https://dracut.wiki.kernel.org">Dracut</a>)
and a binary-package friendly support for different install layouts
via pluggable <span class="docutils literal">installkernel</span> script.</p>

		</div>
		
		<div>
			<h2>
				pyproject2setup.py <sup>[2019-12]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/pyproject2setuppy">mgorny/pyproject2setuppy</a>
				
			</p>
			

			

			<p>A simple (~200 lines of code) wrapper to run pyproject.toml-based
(<a class="reference external" href="https://www.python.org/dev/peps/pep-0518/">PEP 518</a>) projects (using <a class="reference external" href="https://github.com/takluyver/flit/">flit</a> or <a class="reference external" href="https://python-poetry.org/">poetry</a> build systems)
via <a class="reference external" href="https://github.com/pypa/setuptools/">setuptools</a>, without having to go through yet another dependency
hell.</p>

		</div>
		
		<div>
			<h2>
				Split distfile mirror directory structure <sup>[2019-10]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					infra python spec
				</em>
			</p>

			

			

			

			<p>A project for moving distribution files on Gentoo mirrors from
a single flat directory to a more efficient tree of subdirectories.
Covers the specification (<a class="reference external" href="https://gentoo.org/glep/glep-0075.html">GLEP 75</a>), <a class="reference external" href="https://wiki.gentoo.org/wiki/Project:Portage">Portage</a> implementation
and infra tasks regarding the transition.  The key concept is using
a hash of filename to split files into even buckets while preserving
the ability to identify the correct bucket from filename.</p>

		</div>
		
		<div>
			<h2>
				Securing the Gentoo keyserver <sup>[2019-07]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					infra openpgp
				</em>
			</p>

			
			<p>www:
				
				<a rel="external"
					href="https://www.gentoo.org/news/2019/07/03/sks-key-poisoning.html">https://www.gentoo.org/news/2019/07/03/sks-key-poisoning.html</a>
				
			</p>
			

			

			

			<p>In response to <a class="reference external" href="https://gist.github.com/rjhansen/67ab921ffb4084c865b3618d6955275f">key poisoning attacks on SKS</a>, I have disabled key
exchange with SKS network and established a new secure pipeline
to upload keys to Gentoo keyserver.  This permitted Gentoo to continue
operating under the web-of-trust model while remaining resilient
to the attacks.</p>

		</div>
		
		<div>
			<h2>
				votrify <sup>[2019-06]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					openpgp python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/votrify">mgorny/votrify</a>
				
			</p>
			

			

			<p>A tool to confirm results of pseudonymous elections.  Every voter
confirms that he received the same copy of the master ballot, that his
(possibly empty) vote was included in it and that he gets the same
counting results as announced, then uploads a cryptographically signed
confirmation.  Everyone can verify uploaded confirmations to confirm
the results and that no votes were excluded or planted.</p>

		</div>
		
		<div>
			<h2>
				GSoC 2019: NetBSD KNF in clang-format <sup>[2019-06]</sup>
				<em>(mentor)</em>
			</h2>
			
			<p>tags:
				<em class="tags">
					c++ llvm mentor netbsd
				</em>
			</p>

			
			<p>www:
				
				<a rel="external"
					href="https://blog.netbsd.org/tnf/entry/gsoc_2019_report_adding_netbsd1">https://blog.netbsd.org/tnf/entry/gsoc_2019_report_adding_netbsd1</a>
				
			</p>
			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/llvm/llvm-project">llvm/llvm-project</a>
				
			</p>
			

			

			<p>Mentoring a student working on extending <a class="reference external" href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a> into supporting
<a class="reference external" href="https://netbsd.org/">NetBSD</a> coding style.</p>

		</div>
		
		<div>
			<h2>
				GURU <sup>[2019-04]</sup>
				<em>(initiator)</em>
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo package-management social
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/repo/proj/guru.git">repo/proj/guru.git</a>
				
			</p>
			

			<p>A user-maintained ebuild repository for new packages following
the spirit of the <a class="reference external" href="https://wiki.gentoo.org/wiki/Sunrise">Sunrise</a> project.  Based on the concept that all
interested contributors can commit but changes need to be reviewed
by their more experienced colleagues before being deployed to user
systems.</p>

		</div>
		
		<div>
			<h2>
				pram <sup>[2019-03]</sup>
				<em>(rewrite)</em>
			</h2>
			
			<p>tags:
				<em class="tags">
					bash gentoo git
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/pram">mgorny/pram</a>
				
			</p>
			

			

			<p>A rewrite of <a class="reference external" href="https://github.com/monsieurp/Gentoo-App-Pram">Gentoo::App::Pram</a> in pure bash.  A trivial tool
to fetch a GitHub pull request (or a generic patch) and apply it
on top of a git repository.  Includes a few conveniences: editing
the patch before merging, adding tags to close the pull request
or bugs, verifying and adding signoffs.</p>

		</div>
		
		<div>
			<h2>
				Gentoo Authority Keys <sup>[2019-02]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo infra openpgp spec
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/gentoo-authority-key">mgorny/gentoo-authority-key</a>
				
			</p>
			

			

			<p>A system providing OpenPGP key validity information for keys used
by Gentoo developers and Infrastructure services.  Specified
in <a class="reference external" href="https://www.gentoo.org/glep/glep-0079.html">GLEP 79</a>, uses automatically created (and revoked) signatures
on developer keys in a web-of-trust compliant manner.</p>

		</div>
		
		<div>
			<h2>
				Porting LLDB to NetBSD <sup>[2019-01]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					c++ llvm netbsd
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/llvm/llvm-project">llvm/llvm-project</a>
				
			</p>
			

			

			<p>Updating and completing the <a class="reference external" href="https://netbsd.org/">NetBSD</a> support in the <a class="reference external" href="https://lldb.llvm.org/">LLDB</a> debugger
that was initially implemented by Kamil Rytarowski.  This also
involves fixes to various other LLVM projects, as well as maintaining
the buildbot CI instance.</p>

		</div>
		
		<div>
			<h2>
				Gentoo OpenPGP policy update <sup>[2018-07]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo openpgp spec
				</em>
			</p>

			

			

			

			<p>Updated the OpenPGP practices outlined in <a class="reference external" href="https://www.gentoo.org/glep/glep-0063.html">GLEP 63</a> to follow more
modern recommendations and improve security.  This includes using
explicit signing and encryption subkeys, setting expiration dates
and storing the primary key securely offline.</p>

		</div>
		
		<div>
			<h2>
				gemato <sup>[2017-10]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					infra openpgp python spec
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/gemato">mgorny/gemato</a>
				
			</p>
			

			

			<p>A tool to verify the authenticity of a directory tree using a single
OpenPGP signature and recursive digest files (Manifests).
The reference implementation of <a class="reference external" href="https://www.gentoo.org/glep/glep-0074.html">GLEP 74</a>, primarily used to verify
rsync checkouts of the Gentoo ebuild repository.</p>

		</div>
		
		<div>
			<h2>
				Repository mirrors & CI <sup>[2015-05]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					bash gentoo git infra package-management python qa
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/repo-mirror-ci">mgorny/repo-mirror-ci</a>
				
				<a rel="external"
					href="https://github.com/mgorny/pkgcheck2html">mgorny/pkgcheck2html</a>
				
			</p>
			

			

			<p>A Gentoo project serving a twofold goal.  Firstly, it provides
<a class="reference external" href="https://github.com/gentoo-mirror/">mirrors of ebuild repositories</a> listed on the official <a class="reference external" href="https://repos.gentoo.org/">repository
list</a> with pregenerated caches, suitable for efficient and secure
system updates via <a class="reference external" href="https://git-scm.com/">git</a>.  Secondly, it enables a CI pipeline
using <a class="reference external" href="https://github.com/pkgcore/pkgcheck/">pkgcheck</a> linting tool for the Gentoo repository and its GitHub
pull requests.</p>

		</div>
		
		<div>
			<h2>
				cpuid2cpuflags <sup>[2015-01]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					c gentoo
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/cpuid2cpuflags">mgorny/cpuid2cpuflags</a>
				
			</p>
			

			

			<p>A tool to query CPU instruction sets via CPUID (or HWCAPs) and output
respective CPU_FLAGS_* for Gentoo builds.  Originally written
as Python parser of <span class="docutils literal">/proc/cpuinfo</span> for x86, afterwards rewritten
in C to use low-level queries and extended to ARM and PowerPC.</p>

		</div>
		
		<div>
			<h2>
				eselect-opengl redesign <sup>[2014-12]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					bash gentoo
				</em>
			</p>

			

			

			

			<p>Redesign of the tool used to switch between OpenGL implementation
providers in Gentoo.  The new design switched libraries
via controlling LD search paths and unconditionally used reference
headers, while the old one relied on writing symlinks to <span class="docutils literal">/usr</span>.</p>

		</div>
		
		<div>
			<h2>
				Containerization in Portage <sup>[2013-08]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo package-management python qa
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/proj/portage.git">proj/portage.git</a>
				
			</p>
			

			<p>Support of containerizing package builds in <a class="reference external" href="https://wiki.gentoo.org/wiki/Project:Portage">Portage</a> via use of Linux
kernel namespaces.  Initially it was used to prevent built programs
from unexpectedly accessing the Internet and local network services.
Afterwards, it was extended to cover isolation of mounts, processes
(with reliable killing of leftovers) and predictable hostname setting.</p>

		</div>
		
		<div>
			<h2>
				GSoC 2013: OpenID server for identity.gentoo.org <sup>[2013-06]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					django gentoo openid python
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/archive/proj/identity.gentoo.org.git">archive/proj/identity.gentoo.org.git</a>
				
			</p>
			

			<p>A project of extending the work-in-progress web frontend to Gentoo
LDAP with an OpenID server.  It included a plan to provide OpenID
login in other Gentoo applications and serve as Gentoo's SSO.
However, OpenID became obsolete before it was deployed.</p>

		</div>
		
		<div>
			<h2>
				gx86-multilib <sup>[2013-02]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo package-management
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/repo/gentoo.git">repo/gentoo.git</a>
				
			</p>
			

			<p>A new approach to supporting multilib in Gentoo.  Replaced prebuilt
<span class="docutils literal"><span class="pre">emul-linux-x86-*</span></span> packages with eclass-based approach that enabled
building selected packages from source, for any number of ABIs
on every multilib architecture.  Won against the competing
portage-multilib project.</p>

		</div>
		
		<div>
			<h2>
				gpyutils <sup>[2012-12]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo package-management python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/gpyutils">mgorny/gpyutils</a>
				
			</p>
			

			

			<p>A set of various utilities to help with Python package maintenance
in Gentoo.  Provides tools to print and mangle <span class="docutils literal">PYTHON_COMPAT</span>,
find packages needing porting to new Python versions and plot (via
Graphviz) dependency graphs between them.</p>

		</div>
		
		<div>
			<h2>
				python-r1 eclass suite <sup>[2012-10]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					bash gentoo package-management
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/repo/gentoo.git">repo/gentoo.git</a>
				
			</p>
			

			<p>A new eclass suite to build and install Python packages.  Combined
good ideas from other eclasses with a few innovations.  The latter
include separate eclasses for different purposes (build-time dep,
single-impl and multi-impl install) and variables for explicit
metadata building with generator functions for more complex needs.
So far this remains the state-of-the-art example for eclass API.</p>

		</div>
		
		<div>
			<h2>
				libh2o suite <sup>[2012-03]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					c
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/libh2o">mgorny/libh2o</a>
				
				<a rel="external"
					href="https://github.com/mgorny/libh2oxx">mgorny/libh2oxx</a>
				
				<a rel="external"
					href="https://github.com/mgorny/pyh2o">mgorny/pyh2o</a>
				
				<a rel="external"
					href="https://github.com/mgorny/h2o-gtk">mgorny/h2o-gtk</a>
				
			</p>
			

			

			<p>University project.  An optimized C library for water and steam
properties using IF97 tables.  Includes C++ and Python bindings,
and a GTK+ app to query and plot them.</p>

		</div>
		
		<div>
			<h2>
				pshs <sup>[2011-11]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					c server
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/pshs">mgorny/pshs</a>
				
			</p>
			

			

			<p>A tiny CLI server to quickly share files over HTTP.  Supports random
port choice, IP address detection, automated UPnP port forwarding,
URL QRcode generation and TLS with self-signed certificate generated
at runtime.</p>

		</div>
		
		<div>
			<h2>
				eclean-kernel <sup>[2011-10]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/eclean-kernel">mgorny/eclean-kernel</a>
				
			</p>
			

			

			<p>A CLI tool to find and remove old kernels from the system.  Supports
both old-school /boot layout and bootloader spec (gummiboot /
systemd-boot).  Can remove old kernels based on version, mtime or just
clean up stray modules and auxiliary files.</p>

		</div>
		
		<div>
			<h2>
				GSoC 2011: gentoopm <sup>[2011-06]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					package-management python
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/gentoopm">mgorny/gentoopm</a>
				
			</p>
			

			

			<p>A Python package providing an objective wrapper API to the three
Gentoo package managers: Paludis, PkgCore and Portage.  Originally
used to implement GSoC 2011 project of PMS Test Suite.  Later used
in other projects as a more Pythonic API than these directly provided
by the package managers themselves.  Nowadays effectively defunct
as Paludis is no longer developed, and PkgCore is much faster than
Portage while remaining reasonably compatible, rendering fallback
to Portage API unnecessary.</p>

		</div>
		
		<div>
			<h2>
				gentoo.git <sup>[2010-10]</sup>
				<em>(co-developer)</em>
			</h2>
			
			<p>tags:
				<em class="tags">
					gentoo llvm package-management
				</em>
			</p>

			

			

			
			<p>git.gentoo.org:
				
				<a rel="external"
					href="https://gitweb.gentoo.org/repo/gentoo.git">repo/gentoo.git</a>
				
			</p>
			

			<p>Activity as a package maintainer and eclass developer.  Besides sundry
smaller packages of individual interest, maintaining <a class="reference external" href="https://llvm.org/">LLVM</a> and <a class="reference external" href="https://www.xfce.org/">XFCE</a>,
and co-maintaining a large part of the Python ecosystem.  Actively
participating in QA work.</p>

		</div>
		
		<div>
			<h2>
				uam <sup>[2009-02]</sup>
				
			</h2>
			
			<p>tags:
				<em class="tags">
					bash
				</em>
			</p>

			

			
			<p>github:
				
				<a rel="external"
					href="https://github.com/mgorny/uam">mgorny/uam</a>
				
			</p>
			

			

			<p>A removable drive automounter in pure shell, using udev rules without
additional daemons (such as udisks).</p>

		</div>
		
	</body>
</html>

